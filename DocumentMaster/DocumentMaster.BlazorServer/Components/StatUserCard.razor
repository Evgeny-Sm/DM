@using DM.BLL.Services
@using Models
        

@inject FileService FileService

<RadzenCard>
    <div> Разработчик: @Developer   </div>
    <div> Проект: @ProjectName   </div>
    <div> Начало периода: @DateFrom   </div>
    <div> Конец периода: @DateTo   </div>
    <div> Листов разработано: @NumbersDrawingDev   </div>
    <div> Время на разработку: @TimeToDev   </div>  
    <div> Листов проверено: @NumbersDrawingCheck   </div>
    <div> Время на проверку: @TimeToControl   </div>


</RadzenCard>

@code {
    [Parameter]
    public StatUserModel? StatModel { get; set; }

    private string Developer { get; set; } = string.Empty;

    private string ProjectName { get; set; } = string.Empty;

    private string DateFrom { get; set; } = string.Empty;

    private string DateTo { get; set; } = string.Empty;

    private string NumbersDrawingDev { get; set; } = string.Empty;

    private string NumbersDrawingCheck { get; set; } = string.Empty;

    private string TimeToDev { get; set; } = string.Empty;

    private string TimeToControl { get; set; } = string.Empty;


    protected override void OnParametersSet()
    {
        if (StatModel is null)
        {
            return;
        }

        Developer = $"{StatModel.Person.FirstName} {StatModel.Person.LastName}";

        ProjectName = (StatModel.Project is null) ? string.Empty : StatModel.Project.Name;

        DateFrom = StatModel.DateFrom.ToString("HH:mm|dd:MMM:yy");

        DateTo = StatModel.DateTo.ToString("HH:mm|dd:MMM:yy");

        NumbersDrawingDev = StatModel.DevelopedFiles.Sum(f => f.NumbersDrawings).ToString();

        TimeToDev = StatModel.DevelopedFiles.Sum(f => f.TimeToCreate).ToString();      

        NumbersDrawingCheck = StatModel.NumbersDrawingsCheck.ToString();

        TimeToControl = StatModel.TimeToCheck.ToString();
       
    }

}
